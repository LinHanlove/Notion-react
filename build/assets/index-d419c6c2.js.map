{"version":3,"file":"index-d419c6c2.js","sources":["../../src/service/barrage.ts","../../src/assets/images/textBg.jpg","../../src/view/NoteItem/index.tsx","../../src/view/TreeHole/index.tsx"],"sourcesContent":["import axios from \"./request\";\r\nimport { ResponsePageInfoResult, ResponseResult } from \"@/utils\";\r\n\r\ninterface IAddBarrageParams {\r\n  barrage: string; //弹幕\r\n  barrage_avatar: string; //用户头像\r\n}\r\n\r\n/**发布弹幕*/\r\nexport const addBarrage = (data: IAddBarrageParams) => {\r\n  return axios.request<ResponseResult>({\r\n    url: \"/api/barrage/add/barrage\",\r\n    method: \"POST\",\r\n    data,\r\n  });\r\n};\r\ninterface IGetBarrageParams {\r\n  page?: number;\r\n  page_size?: number;\r\n}\r\n\r\nexport interface IBarrageListRes {\r\n  barrage: string;\r\n  barrage_id: number;\r\n  barrage_avatar: string;\r\n  create_at: string;\r\n}\r\n\r\n/** 获取弹幕 */\r\nexport const getBarrageList = (data: IGetBarrageParams) => {\r\n  return axios.request<\r\n    ResponseResult<ResponsePageInfoResult<IBarrageListRes[]>>\r\n  >({\r\n    url: \"/api/barrage/barrage/list\",\r\n    method: \"GET\",\r\n    params: data,\r\n  });\r\n};\r\n\r\ninterface IAddMessageParams {\r\n  user_id: string | number;\r\n  parent_id: string | number;\r\n  username: string | number;\r\n  avatar: string;\r\n  content: string;\r\n}\r\n/** 新增留言 */\r\nexport const addMessage = (data: IAddMessageParams) => {\r\n  return axios.request<ResponseResult>({\r\n    url: \"/api/message/add/message\",\r\n    method: \"POST\",\r\n    data,\r\n  });\r\n};\r\n\r\ninterface IGetMessageListParams {\r\n  page?: number;\r\n  page_size?: number;\r\n}\r\nexport interface IMessageListRes {\r\n  id: number;\r\n  parent_id: number;\r\n  username: string;\r\n  avatar: string;\r\n  content: string;\r\n  create_at: string;\r\n  children: undefined[];\r\n}\r\n\r\n/** 获取留言 */\r\nexport const getMessageList = (data: IGetMessageListParams) => {\r\n  return axios.request<\r\n    ResponseResult<ResponsePageInfoResult<IMessageListRes[]>>\r\n  >({\r\n    url: \"/api/message/get/message\",\r\n    method: \"GET\",\r\n    params: data,\r\n  });\r\n};\r\n\r\ninterface IDelMessage {\r\n  id: string | number;\r\n  is_edit: string | number;\r\n}\r\n/** 删除留言 */\r\nexport const delMessage = (data: IDelMessage) => {\r\n  return axios.request<ResponseResult>({\r\n    url: \"/api/message/del/message\",\r\n    method: \"POST\",\r\n    data,\r\n  });\r\n};\r\n\r\ninterface IEditMessage {\r\n  id: string | number;\r\n  username: string;\r\n  avatar: string;\r\n  content: string;\r\n}\r\n/** 更新留言 */\r\nexport const editMessage = (data: IEditMessage) => {\r\n  return axios.request<ResponseResult>({\r\n    url: \"/api/message/edit/message\",\r\n    method: \"POST\",\r\n    data,\r\n  });\r\n};\r\n","export default \"__VITE_ASSET__9ce87dc3__\"","import { Avatar, Button, Modal } from \"antd\";\r\nimport * as barrage from \"@/service/barrage\";\r\nimport TextArea from \"antd/es/input/TextArea\";\r\nimport { SetStateAction, useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport textBg from \"@/assets/images/textBg.jpg\";\r\nimport { ResponseCode, getUserInfo } from \"@/utils\";\r\nimport Notification, { _Popconfirm } from \"@/components/Notification\";\r\nimport { IMessageListRes } from \"@/service/barrage\";\r\nimport { Icon } from \"@iconify/react/dist/iconify.js\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nconst NodeWarp = styled.div`\r\n  textarea {\r\n    background: url(${textBg}) 100% 100% no-repeat !important;\r\n    background-size: contain !important;\r\n  }\r\n`;\r\n\r\nexport default function Note(props: { TreeData: any[]; success: () => void }) {\r\n  const url =\r\n    \"https://avatars.githubusercontent.com/u/119206123?s=400&u=c687a9a31da1b18e8b93313bca02766b9478bd50&v=4\";\r\n\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n\r\n  const [isEditModalOpen, setEditModalOpen] = useState(false);\r\n\r\n  const { TreeData, success } = props;\r\n\r\n  const userInfo = JSON.parse(getUserInfo()!);\r\n\r\n  const [inputTextArea, setInputTextArea] = useState(\"\");\r\n\r\n  const [user, setUser] = useState<IMessageListRes | any>();\r\n\r\n  const showModal = (i: SetStateAction<undefined>) => {\r\n    setUser(i);\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const showEditModal = (i: SetStateAction<undefined>) => {\r\n    setUser(i);\r\n    setEditModalOpen(true);\r\n  };\r\n\r\n  const handleSubmitReply = async () => {\r\n    try {\r\n      const res = await barrage.addMessage({\r\n        user_id: userInfo.id,\r\n        parent_id: user.id,\r\n        username: user.username,\r\n        avatar: user.avatar,\r\n        content: inputTextArea,\r\n      });\r\n      if (res.code === ResponseCode.SUCCESS) {\r\n        success();\r\n        setIsModalOpen(false);\r\n        setInputTextArea(\"\");\r\n        Notification({ type: \"success\", msg: res.msg, time: 2.5 });\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id: number) => {\r\n    try {\r\n      const res = await barrage.delMessage({\r\n        id: id,\r\n        is_edit: 0,\r\n      });\r\n      if (res.code === ResponseCode.SUCCESS) {\r\n        success();\r\n        Notification({ type: \"success\", msg: res.msg, time: 2.5 });\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  // 修改留言\r\n  const handleEdit = async () => {\r\n    try {\r\n      const res = await barrage.editMessage({\r\n        id: user.id,\r\n        content: inputTextArea,\r\n        username: user.username,\r\n        avatar: user.avatar,\r\n      });\r\n      if (res.code === ResponseCode.SUCCESS) {\r\n        void success();\r\n        setEditModalOpen(false);\r\n        setInputTextArea(\"\");\r\n        Notification({ type: \"success\", msg: res.msg, time: 2.5 });\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full h-auto min-h-[12vh]  my-5\">\r\n      {TreeData.map((i) => (\r\n        <div className=\"mt-6\">\r\n          <div className=\"w-full h-[30%] flex justify-between items-center\">\r\n            <div className=\"flex justify-between items-start\">\r\n              <div>\r\n                <Avatar shape=\"square\" size=\"large\" src={url} />\r\n              </div>\r\n              <div className=\"flex justify-between items-center\">\r\n                <div className=\"mx-1 text-[#ef794f] text-lg font-bold\">\r\n                  {i.username}\r\n                </div>\r\n                <div className=\"  text-sm font-bold\">{i.create_at}</div>\r\n              </div>\r\n            </div>\r\n            <div className=\"text-[teal] flex justify-between items-center\">\r\n              {userInfo.id === i.user_id ? (\r\n                <div className=\"flex justify-between items-center mr-4\">\r\n                  <div className=\"mr-4\">\r\n                    <Icon\r\n                      onClick={() => showEditModal(i)}\r\n                      icon=\"line-md:edit\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <_Popconfirm\r\n                      title=\"主儿\"\r\n                      description=\"确定要删除这个留言吗？\"\r\n                      handelConfirm={() => handleDelete(i.id)}\r\n                    >\r\n                      <Icon icon=\"material-symbols-light:delete\" />\r\n                    </_Popconfirm>\r\n                  </div>\r\n                </div>\r\n              ) : null}\r\n              <motion.div\r\n                whileHover={{ scale: 1.05 }}\r\n                whileTap={{ scale: 0.9 }}\r\n                transition={{ type: \"spring\", stiffness: 500, damping: 20 }}\r\n              >\r\n                <Button\r\n                  onClick={() => showModal(i)}\r\n                  type=\"primary\"\r\n                  className=\"w-12 h-5  flex justify-center items-center text-sm text-[var(--text-color)] font-bold\"\r\n                  size=\"large\"\r\n                >\r\n                  回复\r\n                </Button>\r\n              </motion.div>\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <div className=\"w-full h-[70%] flex justify-center items-center\">\r\n              <div className=\"  w-[90%] min-h-[70%] py-5 px-4 h-auto break-words  bg-[var(--commentContent)] rounded-xl \">\r\n                {i.parent_id !== 0 ? (\r\n                  <span className=\"text-[#03a9f4] text-sm font-bold pr-1\">\r\n                    @{i.username}\r\n                    <span> : </span>\r\n                  </span>\r\n                ) : null}\r\n\r\n                <span className=\" text-sm  break-words text-[#000] whitespace-pre-line\">\r\n                  {i.content}\r\n                </span>\r\n              </div>\r\n            </div>\r\n\r\n            <div className={i.parent_id === 0 ? `ml-12` : \"\"}>\r\n              {i.children.length !== 0 ? (\r\n                <Note TreeData={i.children} success={success} />\r\n              ) : null}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ))}\r\n      <_Model\r\n        title=\"留言\"\r\n        open={isModalOpen}\r\n        Confirm={handleSubmitReply}\r\n        Cancel={() => setIsModalOpen(false)}\r\n        value={inputTextArea}\r\n        setValue={setInputTextArea}\r\n      />\r\n      <_Model\r\n        title=\"修改留言\"\r\n        open={isEditModalOpen}\r\n        Confirm={handleEdit}\r\n        Cancel={() => setEditModalOpen(false)}\r\n        value={inputTextArea}\r\n        setValue={setInputTextArea}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nconst _Model = (props: {\r\n  title: string;\r\n  open: boolean;\r\n  Confirm: () => void;\r\n  Cancel: () => void;\r\n  value: string;\r\n  setValue: (v: SetStateAction<string>) => void;\r\n}) => {\r\n  const { title, open, Confirm, Cancel, value, setValue } = props;\r\n\r\n  return (\r\n    <Modal\r\n      cancelText=\"取消\"\r\n      okText=\"提交\"\r\n      title={title}\r\n      open={open}\r\n      onOk={Confirm}\r\n      onCancel={Cancel}\r\n    >\r\n      <NodeWarp>\r\n        <TextArea\r\n          className=\"[&>textarea]:text-[teal] [&>textarea]:font-semibold\"\r\n          rows={6}\r\n          value={value}\r\n          onChange={(e: { target: { value: SetStateAction<string> } }) =>\r\n            setValue(e.target.value)\r\n          }\r\n          placeholder=\"咦~ 总想说点什么...\"\r\n          allowClear\r\n          showCount\r\n          style={{\r\n            resize: \"none\",\r\n          }}\r\n        />\r\n      </NodeWarp>\r\n    </Modal>\r\n  );\r\n};\r\n","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport { Icon } from \"@iconify/react\";\r\nimport { Button, Input, Pagination, PaginationProps, message } from \"antd\";\r\nimport { SetStateAction, useEffect, useRef, useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport NoteItem from \"@/view/NoteItem\";\r\nimport textBg from \"@/assets/images/textBg.jpg\";\r\nimport { TransitionDown, TransitionUp } from \"@/components/Transition\";\r\nimport Notification from \"@/components/Notification\";\r\nimport { motion } from \"framer-motion\";\r\nimport * as barrage from \"@/service/barrage\";\r\nimport { ResponseCode, getUserInfo } from \"@/utils\";\r\nimport { IBarrageListRes, IMessageListRes } from \"@/service/barrage\";\r\nimport homeBg from \"@/assets/images/homeBg.jpg\";\r\n\r\nconst Barrage_warp = styled.div`\r\n  textarea {\r\n    background: url(${textBg}) 100% 100% no-repeat !important;\r\n    background-size: contain !important;\r\n  }\r\n`;\r\n\r\nexport default function TreeHole() {\r\n  const barrageRef = useRef<HTMLDivElement>(null);\r\n\r\n  const [inputValue, setInputValue] = useState(\"\"); // 定义状态变量\r\n\r\n  const [inputTextArea, setInputTextArea] = useState(\"\");\r\n\r\n  const { TextArea } = Input;\r\n\r\n  const [messageApi, contextHolder] = message.useMessage();\r\n\r\n  const user = JSON.parse(getUserInfo()!);\r\n\r\n  const [barrageList, setBarrageList] = useState<IBarrageListRes[]>([]);\r\n\r\n  const [messageTree, setMessageTree] = useState<IMessageListRes[]>([]);\r\n\r\n  const [barragePageInfo, setBarragePageInfo] = useState({\r\n    page: 1,\r\n    page_size: 200,\r\n    count: 0,\r\n  });\r\n\r\n  const [messagePageInfo, setMessagePageInfo] = useState({\r\n    page: 1,\r\n    page_size: 10,\r\n    count: 0,\r\n  });\r\n\r\n  useEffect(() => {\r\n    const barrageContainer = barrageRef.current;\r\n\r\n    if (barrageContainer) {\r\n      let index = 0;\r\n      const timer = setInterval(() => {\r\n        const barrageItem = document.createElement(\"div\");\r\n        const currentBarrage = barrageList[index]; // 获取当前的弹幕对象\r\n\r\n        barrageItem.innerHTML = `\r\n                  <div class='flex  px-1 h-7 rounded-2xl bg-[#000000b2] items-center top-0'>\r\n                            <img\r\n                              src=${\r\n                                currentBarrage.barrage_avatar\r\n                                  ? currentBarrage.barrage_avatar\r\n                                  : \"https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif?imageView2/1/w/80/h/80\"\r\n                              }\r\n                              alt=\"\"\r\n                              class=\"w-6 mr-2 h-5 rounded-full\"\r\n                            />\r\n                            <div class='text-[#fff] pr-1 text-sm'>${\r\n                              currentBarrage.barrage\r\n                            }</div>\r\n                            </div>\r\n                            `;\r\n\r\n        barrageItem.classList.add(\"barrage_item\");\r\n        barrageItem.style.position = \"absolute\";\r\n\r\n        barrageItem.style.animation = `rightToLeft ${Math.floor(\r\n          Math.random() * 20\r\n        )}s linear both`;\r\n\r\n        barrageContainer.appendChild(barrageItem);\r\n\r\n        console.log(barrageContainer.clientHeight);\r\n\r\n        const maxTop = barrageContainer.clientHeight - barrageItem.offsetHeight; // 获取弹道范围\r\n\r\n        barrageItem.style.top = `${Math.floor(Math.random() * maxTop)}px`; // 随机高度 animation: rightToLeft 7s linear both;\r\n\r\n        barrageItem.addEventListener(\"animationend\", () => {\r\n          // 弹幕动画结束时触发，将弹幕元素从DOM中移除\r\n          barrageContainer.removeChild(barrageItem);\r\n        });\r\n\r\n        index++;\r\n        if (index === barrageList.length) {\r\n          // index = 0; // 重新从第一个弹幕开始播放\r\n          setBarragePageInfo({\r\n            ...barragePageInfo,\r\n            page: barragePageInfo.page + 1,\r\n          });\r\n          void getBarrageList();\r\n        }\r\n      }, 300);\r\n\r\n      return () => {\r\n        clearInterval(timer); // 清除定时器\r\n      };\r\n    }\r\n  }, [barrageList]);\r\n\r\n  // 获取弹幕\r\n  const getBarrageList = async () => {\r\n    try {\r\n      const res = await barrage.getBarrageList({\r\n        page: barragePageInfo.page,\r\n        page_size: barragePageInfo.page_size,\r\n      });\r\n      if (res.code === ResponseCode.SUCCESS) {\r\n        setBarrageList(res.data.data);\r\n        setBarragePageInfo({\r\n          ...barragePageInfo,\r\n          count: res.data.total.count,\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  // 发布弹幕\r\n  const handleRelease = async () => {\r\n    try {\r\n      if (inputValue !== \"\") {\r\n        if (inputValue.length >= 50) {\r\n          messageApi.open({\r\n            type: \"error\",\r\n            content:\r\n              \"谁让你写个留言这么多字，寒寒都装不下了，最多不能超多50个字\",\r\n            className: \"custom-class\",\r\n            style: {\r\n              marginTop: \"20vh\",\r\n            },\r\n          });\r\n          setInputValue(\"\");\r\n          return;\r\n        }\r\n\r\n        const res = await barrage.addBarrage({\r\n          barrage: inputValue,\r\n          barrage_avatar: user.avatar,\r\n        });\r\n        if (res.code === ResponseCode.SUCCESS) {\r\n          Notification({ type: \"error\", msg: res.msg, time: 2.5 });\r\n        }\r\n        setInputValue(\"\");\r\n      } else {\r\n        messageApi.open({\r\n          type: \"error\",\r\n          content: \"都没写留言，你提交什么？小心我举报你！！\",\r\n          className: \"custom-class\",\r\n          style: {\r\n            marginTop: \"20vh\",\r\n          },\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  // 发布留言\r\n  const handleAddMessage = async () => {\r\n    try {\r\n      const res = await barrage.addMessage({\r\n        user_id: user.id,\r\n        parent_id: 0,\r\n        username: user.username,\r\n        avatar: user.avatar,\r\n        content: inputTextArea,\r\n      });\r\n      if (res.code === ResponseCode.SUCCESS) {\r\n        setInputTextArea(\"\");\r\n        void getMessageList();\r\n        Notification({ type: \"success\", msg: res.msg, time: 2.5 });\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  // 获取留言\r\n  const getMessageList = async () => {\r\n    try {\r\n      const res = await barrage.getMessageList({\r\n        page: messagePageInfo.page,\r\n        page_size: messagePageInfo.page_size,\r\n      });\r\n      if (res.code === ResponseCode.SUCCESS) {\r\n        setMessageTree(res.data.data);\r\n        setMessagePageInfo({\r\n          ...messagePageInfo,\r\n          count: res.data.total.count,\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const handleChangePagination: PaginationProps[\"onChange\"] = (page) => {\r\n    setMessagePageInfo({\r\n      ...messagePageInfo,\r\n      page: page,\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    void getMessageList();\r\n  }, [messagePageInfo.page]);\r\n\r\n  useEffect(() => {\r\n    void getMessageList();\r\n    void getBarrageList();\r\n  }, []);\r\n\r\n  return (\r\n    <Barrage_warp>\r\n      {contextHolder}\r\n      <div className=\"w-full h-auto\">\r\n        <TransitionDown>\r\n          <div className=\"h-[100vh] relative bg-[var(--background)] w-full pt-[var(--header)]\">\r\n            <img src={homeBg} alt=\"\" className=\"absolute top-0 w-full h-full\" />\r\n            <div ref={barrageRef} className=\"h-full relative SmileySans\">\r\n              <div className=\"md:w-[20vw] w-full  h-[10vh] absolute top-[50%] z-[999] translate-y-[-50%] translate-x-[-50%] left-[50%] flex flex-col justify-center items-center\">\r\n                <div className=\"my-5 text-lg text-[--text-color] font-extrabold\">\r\n                  🎉 树洞 🎉\r\n                </div>\r\n                <Input\r\n                  onKeyDown={(e) => {\r\n                    e.code === \"Enter\" && handleRelease();\r\n                  }}\r\n                  value={inputValue}\r\n                  onChange={(e: {\r\n                    target: { value: SetStateAction<string> };\r\n                  }) => setInputValue(e.target.value)}\r\n                  placeholder=\"分享你那些有趣的事\"\r\n                  className=\"rounded-2xl border-[var(--lightGreen)] w-[80%] h-[40%]\"\r\n                  suffix={\r\n                    <motion.div\r\n                      onClick={handleRelease}\r\n                      whileHover={{ scale: 1.2 }}\r\n                      whileTap={{ scale: 0.9 }}\r\n                      transition={{\r\n                        type: \"spring\",\r\n                        stiffness: 500,\r\n                        damping: 20,\r\n                      }}\r\n                    >\r\n                      <Icon\r\n                        icon=\"ph:radio-button-fill\"\r\n                        className=\"text-[1.4rem] text-[var(--lightGreen)] \"\r\n                      />\r\n                    </motion.div>\r\n                  }\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </TransitionDown>\r\n        <TransitionUp>\r\n          <div className=\"h-auto w-full flex justify-center\">\r\n            <div className=\"md:w-[50%] w-[90%]  h-auto  \">\r\n              <div className=\"flex items-center my-5 SmileySans\">\r\n                <Icon\r\n                  className=\"text-lg text-[teal] mr-1\"\r\n                  icon=\"simple-line-icons:note\"\r\n                />\r\n                <div className=\"text-[teal] text-xl font-extrabold \">\r\n                  留言📩\r\n                </div>\r\n              </div>\r\n              <div className=\"\">\r\n                <TextArea\r\n                  className=\"[&>textarea]:text-[teal] [&>textarea]:font-semibold\"\r\n                  rows={6}\r\n                  value={inputTextArea}\r\n                  onChange={(e: {\r\n                    target: { value: SetStateAction<string> };\r\n                  }) => setInputTextArea(e.target.value)}\r\n                  placeholder=\"咦~ 总想说点什么...\"\r\n                  allowClear\r\n                  showCount\r\n                  style={{\r\n                    resize: \"none\",\r\n                  }}\r\n                />\r\n                <div className=\"w-full flex md:justify-end justify-center items-center mt-2 \">\r\n                  <Button\r\n                    type=\"primary\"\r\n                    className=\" md:w-40 w-[50%] md:h-8 h-6 m-[12px_0] flex justify-center items-center text-[var(--text-color)] font-bold\"\r\n                    shape=\"round\"\r\n                    size=\"large\"\r\n                    onClick={handleAddMessage}\r\n                  >\r\n                    <Icon\r\n                      className=\"w-6 h-6 mr-2 text-[--text-color] scale-an\"\r\n                      icon=\"icon-park-solid:play\"\r\n                    />\r\n                    <div>提交</div>\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n              <div className=\"w-full h-auto\">\r\n                <div className=\"w-full flex SmileySans my-5 justify-start items-center font-bold text-[teal] text-lg\">\r\n                  <div> 🎉Comments</div>\r\n                  <div className=\"mx-2\"> |</div>\r\n                  <div>\r\n                    <span>{messageTree.length}</span>条留言 🎉\r\n                  </div>\r\n                </div>\r\n                <NoteItem\r\n                  TreeData={messageTree}\r\n                  success={() => getMessageList()}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"w-full flex justify-center pb-10\">\r\n            <Pagination\r\n              onChange={handleChangePagination}\r\n              current={messagePageInfo.page}\r\n              total={messagePageInfo?.count}\r\n            />\r\n          </div>\r\n        </TransitionUp>\r\n      </div>\r\n    </Barrage_warp>\r\n  );\r\n}\r\n"],"names":["addBarrage","data","axios","getBarrageList","addMessage","getMessageList","delMessage","editMessage","textBg","NodeWarp","styled","Note","props","url","isModalOpen","setIsModalOpen","useState","isEditModalOpen","setEditModalOpen","TreeData","success","userInfo","getUserInfo","inputTextArea","setInputTextArea","user","setUser","showModal","i","showEditModal","handleSubmitReply","res","barrage.addMessage","ResponseCode","Notification","error","handleDelete","id","barrage.delMessage","handleEdit","barrage.editMessage","jsxs","jsx","Avatar","Icon","_Popconfirm","motion","Button","_Model","title","open","Confirm","Cancel","value","setValue","Modal","TextArea","e","Barrage_warp","TreeHole","barrageRef","useRef","inputValue","setInputValue","Input","messageApi","contextHolder","message","barrageList","setBarrageList","messageTree","setMessageTree","barragePageInfo","setBarragePageInfo","messagePageInfo","setMessagePageInfo","useEffect","barrageContainer","index","timer","barrageItem","currentBarrage","maxTop","barrage.getBarrageList","handleRelease","barrage.addBarrage","handleAddMessage","barrage.getMessageList","handleChangePagination","page","TransitionDown","homeBg","TransitionUp","NoteItem","Pagination"],"mappings":"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"}