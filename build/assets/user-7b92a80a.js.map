{"version":3,"file":"user-7b92a80a.js","sources":["../../src/service/user.ts"],"sourcesContent":["// 统一中转模块函数\r\nimport axios from \"./request\";\r\nimport { ResponseResult } from \"@/utils\";\r\n\r\nexport interface ILoginParams {\r\n  username: string;\r\n  password: string;\r\n}\r\nexport interface ILoginResult {\r\n  token: string;\r\n  userinfo: {\r\n    id: number;\r\n    username: string;\r\n    nickname: object;\r\n    phone: number;\r\n    avatar: object;\r\n    last_login_time: string;\r\n    birthday: object;\r\n    motto: object;\r\n    create_time: string;\r\n    email: string;\r\n  };\r\n}\r\n/** 登录 */\r\nexport const login = (data: ILoginParams) => {\r\n  return axios.request<ResponseResult<ILoginResult>>({\r\n    url: \"/api/user/login\",\r\n    method: \"post\",\r\n    data,\r\n  });\r\n};\r\nexport interface IVerifyCodeParams {\r\n  email: string;\r\n  is_exist: number | string;\r\n}\r\n\r\n/** 获取验证码 */\r\nexport const getVerifyCode = (data: IVerifyCodeParams) => {\r\n  return axios.request<ResponseResult>({\r\n    url: \"/api/verify/code\",\r\n    method: \"get\",\r\n    params: data,\r\n  });\r\n};\r\n\r\nexport interface IRegisterParams {\r\n  username: string;\r\n  password: string;\r\n  email: string;\r\n  code: string;\r\n}\r\n\r\n/** 用户注册 */\r\nexport const register = (data: IRegisterParams) => {\r\n  return axios.request<ResponseResult>({\r\n    url: \"/api/user/register\",\r\n    method: \"post\",\r\n    data,\r\n  });\r\n};\r\n\r\ninterface IGetUserInfoParams {\r\n  id: string | number;\r\n}\r\nexport interface IGetUserInfoResult {\r\n  id: number;\r\n  username: string;\r\n  nickname: string;\r\n  phone: number;\r\n  password: string;\r\n  avatar: string;\r\n  last_login_time: string;\r\n  birthday: string;\r\n  motto: string;\r\n  create_time: string;\r\n  email: string;\r\n  personal_articles_count: number;\r\n}\r\n/** 获取用户信息 */\r\nexport const getUserInfo = (data: IGetUserInfoParams) => {\r\n  return axios.request<ResponseResult<IGetUserInfoResult>>({\r\n    url: \"/api/user/info\",\r\n    method: \"get\",\r\n    params: data,\r\n  });\r\n};\r\n\r\ninterface IEditUserInfoParams {\r\n  id: number | string;\r\n  motto?: string;\r\n  is_edit: number;\r\n  nickname?: string;\r\n  birthday?: Date | string;\r\n  phone?: number | string;\r\n  email?: string;\r\n}\r\n\r\n/** 编辑用户信息 */\r\nexport const editUserInfo = (data: IEditUserInfoParams) => {\r\n  return axios.request<ResponseResult>({\r\n    url: \"/api/user/edit/userinfo\",\r\n    method: \"post\",\r\n    data,\r\n  });\r\n};\r\n\r\n/* 上传文件 头像 背景图 */\r\ninterface IUploadFileParams {\r\n  file: Blob;\r\n  id: string;\r\n}\r\n\r\nexport const uploadFile = (data: IUploadFileParams) => {\r\n  const formData = new FormData();\r\n  formData.append(\"file\", data.file);\r\n  formData.append(\"id\", data.id);\r\n  return axios.request<ResponseResult>({\r\n    url: \"/api/user/upload\",\r\n    method: \"POST\",\r\n    data: formData,\r\n  });\r\n};\r\n"],"names":["login","data","axios","getVerifyCode","register","getUserInfo","editUserInfo","uploadFile","formData"],"mappings":"0CAwBa,MAAAA,EAASC,GACbC,EAAM,QAAsC,CACjD,IAAK,kBACL,OAAQ,OACR,KAAAD,CAAA,CACD,EAQUE,EAAiBF,GACrBC,EAAM,QAAwB,CACnC,IAAK,mBACL,OAAQ,MACR,OAAQD,CAAA,CACT,EAWUG,EAAYH,GAChBC,EAAM,QAAwB,CACnC,IAAK,qBACL,OAAQ,OACR,KAAAD,CAAA,CACD,EAqBUI,EAAeJ,GACnBC,EAAM,QAA4C,CACvD,IAAK,iBACL,OAAQ,MACR,OAAQD,CAAA,CACT,EAcUK,EAAgBL,GACpBC,EAAM,QAAwB,CACnC,IAAK,0BACL,OAAQ,OACR,KAAAD,CAAA,CACD,EASUM,EAAcN,GAA4B,CAC/C,MAAAO,EAAW,IAAI,SACZ,OAAAA,EAAA,OAAO,OAAQP,EAAK,IAAI,EACxBO,EAAA,OAAO,KAAMP,EAAK,EAAE,EACtBC,EAAM,QAAwB,CACnC,IAAK,mBACL,OAAQ,OACR,KAAMM,CAAA,CACP,CACH"}