import{u,r as a,j as e}from"./index-f32d64df.js";import{T as g,a as j}from"./index-178d21bb.js";import{I as N,D as w,L as o}from"./index.es-1f32eb31.js";import{I as i}from"./iconify-cb7a1779.js";import{b}from"./article-366e1513.js";import{g as S,R as y}from"./request-db53186c.js";import{S as k}from"./Skeleton-5b4f41be.js";import{A as I}from"./index-cad7cce6.js";import"./button-63286e2e.js";import"./LeftOutlined-7916e190.js";import"./CheckOutlined-566377ef.js";import"./index-0c09f63f.js";import"./index-59d990f3.js";import"./Overflow-fc830e4a.js";import"./motion-c2cc6a2e.js";import"./slide-0918c5e7.js";import"./row-b9f67384.js";import"./useForceUpdate-0fb824c6.js";function X(){const x=u(),h=JSON.parse(S()),[c,l]=a.useState(!1),[p,n]=a.useState(!1),[r,v]=a.useState([]),[t,d]=a.useState({page:1,page_size:10,count:0}),m=async()=>{try{if(console.log(c),c)return;l(!0);const s=await b({author_id:h.id,page:t.page,page_size:t.page_size});s.code===y.SUCCESS?(v([...r,...s.data.data]),d({...t,page:t.page+1,count:s.data.total.count}),r.length===s.data.total.count?n(!0):n(!1),l(!1)):d({...t,page:t.page})}catch{l(!1)}};return a.useEffect(()=>{m()},[]),e.jsxs("div",{id:"scrollableDiv",className:"h-[100vh] overflow-y-auto",children:[e.jsx(g,{children:e.jsx("div",{className:"h-[30vh] bg-[teal] text-center text-[var(--text-color)]",children:e.jsx("div",{className:"leading-[30vh] text-[20px] font-bold",children:"make img img..."})})}),e.jsx(j,{children:e.jsx("div",{className:"h-auto bg-[--background] flex justify-center ",children:e.jsx(N,{className:"md:w-[50vw] w-[90vw] h-full ",dataLength:r.length,next:m,hasMore:!p,loader:e.jsx(k,{avatar:!0,paragraph:{rows:2},active:!0}),endMessage:e.jsx(w,{plain:!0,children:"这是全部了！没有更多了~~~ 🤐"}),scrollableTarget:"scrollableDiv",children:e.jsx(o,{itemLayout:"vertical",dataSource:r,renderItem:s=>e.jsx(o.Item,{onClick:()=>{x("/preview-notes",{state:{id:s.article_id}})},extra:e.jsx("img",{width:120,alt:"logo",src:s.article_cover!==""?s.article_cover:"https://gw.alipayobjects.com/zos/rmsportal/mqaQswcyDLcXyDKnZfES.png"}),className:"w-full   pb-2",children:e.jsx(o.Item.Meta,{className:" h-full overflow-hidden text-[var(--lightGreen)]",avatar:e.jsx(I,{src:s.avatar}),title:e.jsx("div",{className:"text-[teal]",children:s.title}),description:e.jsxs("div",{className:"h-30 text-[var(--text-color)]",children:[e.jsx("div",{className:"h-10 overflow-hidden",children:s.article_summary}),e.jsxs("div",{className:"w-full h-8 flex justify-between items-center flex-wrap ",children:[e.jsxs("div",{className:"w-1/2 flex items-center invisible sm:visible",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(i,{icon:"mdi:hot",className:"text-[red] mr-1"}),e.jsx("div",{children:s.viewers})]}),e.jsxs("div",{className:"flex items-center mx-5",children:[e.jsx(i,{icon:"jam:write",className:" mr-1"}),e.jsx("div",{children:s.nickname})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(i,{icon:"flat-color-icons:like",className:" mr-1"}),e.jsx("div",{children:s.like})]})]}),e.jsx("div",{className:"w-1/2 flex justify-end items-center invisible sm:visible",children:s.article_label.map(f=>e.jsxs("div",{className:"flex h-full items-center mx-1 truncate rounded-lg text-[var(--lightGreen)] border-dashed border  border-[var(--lightGreen)] px-1",children:[e.jsx(i,{icon:"solar:bookmark-opened-outline",className:"text-[orange] mr-1"}),f]}))})]})]})})},s.article_id)})})})})]})}export{X as default};
//# sourceMappingURL=index-8c2a9a19.js.map
